<div>
    <h1  class="text-centre">Change password</h1>
    <form [formGroup]="resetForm">
        <div  fxLayout="column">
            <mat-form-field>
                <mat-label>Password</mat-label>
                <input 
                    [type]="hidePassword ? 'password' : 'text'"  
                    [formControlName]="'oldPassword'" 
                    matInput 
                />
                <button type="button" mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                    <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-hint 
                    *ngIf="f.oldPassword.touched && f.oldPassword.invalid && f.oldPassword.errors.required"
                    class="error"
                >
                    Password is required.
                </mat-hint>
                <mat-hint 
                    *ngIf="f.oldPassword.touched && f.oldPassword.invalid && f.oldPassword.errors.minlength"
                    class="error"
                >
                    Password should be at least 5 characters long.
                </mat-hint>
            </mat-form-field>
            <mat-form-field>
                <mat-label>New password</mat-label>
                <input 
                    [type]="hideNewPassword ? 'password' : 'text'" 
                    [formControlName]="'newPassword'" 
                    matInput  
                />
                <mat-hint 
                    *ngIf="f.newPassword.touched && f.newPassword.invalid && f.newPassword.errors.required"
                    class="error"
                >
                    Password is required.
                </mat-hint>
                <mat-hint 
                    *ngIf="f.newPassword.touched && f.newPassword.invalid && f.newPassword.errors.minlength"
                    class="error"
                >
                    Password should be at least 5 characters long.
                </mat-hint>
                <button type="button" mat-icon-button matSuffix (click)="hideNewPassword = !hideNewPassword" [attr.aria-label]="'Hide new password'" [attr.aria-pressed]="hideNewPassword">
                    <mat-icon>{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                
            </mat-form-field>
            <mat-form-field>
                <mat-label>Confirm new password</mat-label>
                <input 
                    [type]="hideConfirmPassword ? 'password' : 'text'"
                    [formControlName]="'confirmPassword'"
                    matInput 
                    ngValidateEqual="newPassword" 
                />
                <button type="button" mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" [attr.aria-label]="'Hide confirm password'" [attr.aria-pressed]="hideConfirmPassword">
                    <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-hint 
                    *ngIf="(f.confirmPassword.dirty || f.confirmPassword.touched) && f.confirmPassword.invalid"
                    class="error"
                >
                    Passwords don't match.
                </mat-hint>
                <mat-hint 
                    *ngIf="(f.confirmPassword.dirty || f.confirmPassword.touched) && !f.confirmPassword.invalid" 
                    class="success">
                    Passwords match.
                </mat-hint>
            </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="end" mat-dialog-actions>
            <button mat-button class="button-option-main" [disabled]="resetForm.invalid" (click)="onChangePassword()">
            Change password
            </button>
            <button mat-button class="button-option-alt" mat-dialog-close>
                Cancel
            </button>
        </div>
</form>
</div>